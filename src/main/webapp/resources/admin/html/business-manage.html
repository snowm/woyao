﻿<div class="panel panel-default" ms-controller='shopController'>
	  <div class="panel panel-default" ms-if="formShow">        
        <div class="panel-body">
            
<!-- 商品管理 -->
		
        <div class="tab-content mb30">
          <div class="tab-pane active" id="msgsCtn">
          <div class="row">
         	<!-- 选择图片 -->
	           <div class="row">
                	<div class="panel panel-stat">
                        <div class="panel-heading">
                            <div class="row text-center">
								
								<form id="uploadForm">  
									  <img class="media-object thumbnail center-block" ms-attr-src="imgViewSrc" style="max-width:200px;max-height:200px;min-height:100px;min-width:100px" alt="">
								      <input type="file" id="uploadFileIpt" name="uploadFile" style="visibility: hidden"/>
								      <div class="clearfix"></div>
								</form>  
                                <div ms-if="uploadbtn">
							        <input class="btn btn-xs btn-default" type="button" value="选择图片" ms-click="chioseImgs"/>  
							        <input class="btn btn-xs btn-success" type="button" value="上传" ms-click="uploadImg"/>  
	                            </div>
                            </div><!-- row -->
                        </div><!-- panel-heading -->
                   </div><!-- panel -->
            	</div>
            <!-- 选择图片 -->
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">商家名称</label>
                        <input type="text" name="name" class="form-control shopName" placeholder="请输入商店名称" ms-duplex="formData.name">
                    </div>
                </div><!-- col-sm-6 -->
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">地 址</label>
                        <input type="text" name="address" class="form-control adss" placeholder="请输入地址" ms-duplex="formData.address">
                    </div>
                </div><!-- col-sm-6 -->
            </div><!-- row -->

            <div class="row">              
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">描述信息</label>
                        <input type="text" name="description" class="form-control" placeholder="请输入描述信息" ms-duplex="formData.description">
                    </div>
                </div><!-- col-sm-6 -->
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">纬度</label>
                        <input type="text" name="latitude" class="form-control latitude" placeholder="整数部分为0～90，必须输入1到5位小数" ms-duplex="formData.latitude">
                    </div>
                </div><!-- col-sm-6 -->
            </div><!-- row -->

            <div class="row">                
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">经度</label>
                        <input type="text" name="longitude" class="form-control longitude" placeholder="整数部分为0～180，必须输入1到5位小数" ms-duplex="formData.longitude">
                    </div>
                </div><!-- col-sm-6 -->
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">管理员账号</label>
                        <input type="text" name="managerName" class="form-control managerName" placeholder="请输入账号" ms-duplex="formData.managerName">
                    </div>
                </div><!-- col-sm-6 -->
            </div><!-- row -->

            <div class="row" ms-if="managename">                
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label">管理员密码</label>
                        <input type="text" name="managerPwd" class="form-control managerPwd" placeholder="请输入密码" ms-duplex="formData.managerPwd">
                    </div>
                </div><!-- col-sm-6 -->
            </div><!-- row --> 
             <div class="row" ms-if="reset">                
                <div class="col-sm-6">
                     <button class="btn btn-success btn-block" ms-click="cPwd">重置密码</button>
                </div><!-- col-sm-6 -->
            </div><!-- row -->          
          </div>          
     </div>
    </div>
        
        <div class="panel-footer text-right">
            <button class="btn btn-success" ms-click="submitItem">提交</button>
            <button class="btn btn-default" ms-click="hideNewShop">取消</button>
        </div>
    </div>

    
	<div class="panel panel-default" ms-if="!formShow">
	  <div class="panel-body">
	    <div class="row">
	      <div class="col-sm-6">
	        <div class="form-group">
	          <label class="control-label">商家名称</label>
	          <input type="text" name="firstname" class="form-control"  ms-duplex="queryCdt.name">
	        </div>
	      </div>	     
	      <div class="col-sm-12 text-right">
	        <div class="form-group">
	          <button class="btn btn-info" ms-click="queryData">查 询</button>
	        </div>
	      </div>
	      <!-- col-sm-6 -->
	    </div><!-- row -->
	  </div><!-- panel-body -->
	
	 
	  <div class="table-responsive" style="border-top: 1px solid #dadada" ms-if='shopList.length != 0'>
	    <table class="table table-striped table-hover text-center">
	      <thead>
	      <tr>
	        <th class="text-center">商家名称</th>
	        <th class="text-center">商家图片</th>
	        <th class="text-center">商家编号</th>
	        <th class="text-center">经纬度</th>
	        <th class="text-center">联系人</th>
	        <th class="text-center">创建时间</th>
	        <th class="text-center">公共url</th>
	        <!-- <th class="text-center">是否删除</th> -->
	        <th class="text-center text-right" width="200">操作</th>
	      </tr>
	      </thead>
	      <tbody>
	      <tr ms-repeat-p="shopList">
	        <td ms-text="p.name"></td>
	       	<td class="m-v-img" style="position:relative">
	       			<img class="media-object center-block" ms-attr-src="p.picUrl" style="width:30px;height:30px;" alt="">
	       			<img class="media-object center-block m-v-img-img" ms-attr-src="p.picUrl" style="display:none;z-index:9999999;width:200px;height:200px;position:absolute;top:-100%;left:-30%;border:1px solid #999999;padding:5px;background:white;border-radius:6px" alt="">
           	</td>
	        <td ms-text="p.id"></td>
	        <td>{{p.longitude + "," + p.latitude}}</td>
	        <td ms-text="p.managerName"></td>
	        <td ms-text="p.creationDate"></td>
	        <td ms-text="p.publicAccURL"></td>
	        <!-- <td><span ms-if="p.deleted" disabled="disabled">已删除</span><span ms-if="!p.deleted">未删除</span></td> -->
	        <td class="table-action">
		        <button class="btn btn-xs btn-info" ms-click="updateShop(p.id)"><i class="fa fa-pencil"></i> 修改</button>
		        <button class="btn btn-xs btn-danger"  ms-click="deleteShop(p.id)"><i class="fa fa-trash-o"></i> 删除</button>
	        </td>
	      </tr>
	      </tbody>
	    </table>
	    <div class="">
        	<div class="col-sm-5"></div>
        	<ul class="pagination pagination-split">
                <li  ms-click="page('upPage')"><a href="#" style="background: #29406f;color:#fff;"><i class="glyphicon glyphicon-arrow-left"></i> 上一页</a></li>             
                <li><a href="#" ms-click="page('nextPage')" style="background: #29406f;color:#fff;">下一页 <i class="glyphicon glyphicon-arrow-right"></i></a></li>
            </ul>
        </div>
	  </div>
	
	  <div class="panel-footer text-right">
	    <button class="btn btn-success" ms-click="newShop">录 入</button>
	  </div>
	</div>
	<!-- 没有数据 --> 
    <div class="table-responsive"  ms-if="nothing">
        <table class="table table-striped table-hover text-center">
            <thead>
            <tr>              
                <th class="text-center">亲！！！暂时没有数据哦</th>                
            </tr>
            </thead>            
        </table>  
    </div> 
</div>